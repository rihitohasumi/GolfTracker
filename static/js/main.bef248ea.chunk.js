(this.webpackJsonppose=this.webpackJsonppose||[]).push([[0],{389:function(t,e,n){},390:function(t,e,n){},391:function(t,e,n){},396:function(t,e){},397:function(t,e){},405:function(t,e){},408:function(t,e){},409:function(t,e){},558:function(t,e,n){"use strict";n.r(e);var o=n(20),i=n.n(o),c=n(154),r=n.n(c),a=(n(389),n(390),n(4)),s=n.n(a),l=n(11),u=n(6),p=(n(391),n(353)),f=(n(557),n(161)),d=n(373),m=n.n(d),b=n(374),h=n.n(b),x=n(571),g=n(575),j=n(574),v=n(572),y=n(234),O=n(47),w=Object(x.a)((function(t){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:t.spacing(1)},input:{display:"none"},buttonProgress:{color:y.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),k={word:".pdf,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",images:"image/*",excel:".xlsx,.xls,.csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},S=function(t){var e=t.accept,n=t.multiple,i=void 0!==n&&n,c=t.id,r=t.inputProps,a=t.labelProps,s=t.buttonProps,l=t.onChange,u=t.label,p=t.loading,d=w(),b=Object(o.useMemo)((function(){return function(t){if(!t||!t.length)return"";if(h()(t))return k[t]?k[t]:t;if(m()(t)){var e=t.length;return t.reduce((function(t,n,o){return k[n]?t+=k[n]:n&&n.length&&n.trim().length&&(t+=n.trim()),e>1&&o<e-1&&(t+=","),t}),"")}return""}(e)}),[e]);return Object(O.jsx)("div",{className:d.container,children:Object(O.jsxs)(g.a,{className:d.formControl,children:[Object(O.jsx)("input",Object(f.a)({id:c,accept:b,className:d.input,multiple:i,type:"file",onChange:l},r)),Object(O.jsxs)("label",Object(f.a)(Object(f.a)({htmlFor:c},a),{},{children:[Object(O.jsx)(j.a,Object(f.a)(Object(f.a)({variant:"contained",component:"span"},s),{},{disabled:p,children:u})),p&&Object(O.jsx)(v.a,{size:24,className:d.buttonProgress})]}))]})})},F=n(573),T=".jpg",P="30",C="out.mp4",L=/\.jpg/g,R="/inImage",I="%06d.jpg",U="image/jpeg",B=n(537),E=B.createFFmpeg,N=B.fetchFile,M=E({log:!1});function D(){var t=this,e=0,n="",i=Object(o.useState)(!1),c=Object(u.a)(i,2),r=c[0],a=c[1],f=Object(o.useState)(null),d=Object(u.a)(f,2),m=d[0],b=d[1],h=Object(o.useState)(null),x=Object(u.a)(h,2),g=x[0],j=x[1],v=Object(o.useState)(0),y=Object(u.a)(v,2),w=y[0],k=y[1],B=Object(o.useState)(0),E=Object(u.a)(B,2),D=E[0],J=E[1],W=function(t,e){var n,o;return new Promise((function(i,c){n=M.FS("readFile",t),(o=document.createElement("img")).onload=function(){A(o,M,t,e),i(o)},o.src=URL.createObjectURL(new Blob([n.buffer]))}))},_=function(){var o=Object(l.a)(s.a.mark((function o(i){var c,r,u,p,f,d;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=i.target.files,a(!0),r=c[0].name,n=r,o.next=6,M.load();case 6:return o.t0=M,o.t1=r,o.next=10,N(c[0]);case 10:return o.t2=o.sent,o.t0.FS.call(o.t0,"writeFile",o.t1,o.t2),M.FS("mkdir",R),o.next=15,M.run("-i",r,"-r",P,"-f","image2","".concat(R,"/").concat(I));case 15:u=M.FS("readdir",R),p=u.filter((function(t){return t.match(L)})),e=p.length,f=Promise.resolve(),d=function(){var n;return new Promise(function(){var o=Object(l.a)(s.a.mark((function o(i,c){var r;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(r=1;r<=e;r++)n="".concat(R,"/").concat("000000".concat(r).slice(-6)).concat(T),f=f.then(W.bind(t,n,r));case 1:case"end":return o.stop()}}),o)})));return function(t,e){return o.apply(this,arguments)}}())},Promise.resolve().then(d.bind(t));case 22:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}(),z=function(t,e){t.clearRect(0,0,w,D),t.lineWidth=3,t.strokeStyle="#191970",t.beginPath(),t.moveTo(e[5].position.x,e[5].position.y),t.lineTo(e[6].position.x,e[6].position.y),t.stroke(),t.strokeStyle="#ff8c00",t.beginPath(),t.moveTo(e[6].position.x,e[6].position.y),t.lineTo(e[8].position.x,e[8].position.y),t.lineTo(e[10].position.x,e[10].position.y),t.stroke(),t.strokeStyle="#00ffff",t.beginPath(),t.moveTo(e[5].position.x,e[5].position.y),t.lineTo(e[7].position.x,e[7].position.y),t.lineTo(e[9].position.x,e[9].position.y),t.stroke(),t.strokeStyle="#7cfc00",t.beginPath(),t.moveTo(e[5].position.x,e[5].position.y),t.lineTo(e[11].position.x,e[11].position.y),t.stroke(),t.strokeStyle="#7cfc00",t.beginPath(),t.moveTo(e[6].position.x,e[6].position.y),t.lineTo(e[12].position.x,e[12].position.y),t.stroke(),t.strokeStyle="#3cb371",t.beginPath(),t.moveTo(e[11].position.x,e[11].position.y),t.lineTo(e[12].position.x,e[12].position.y),t.stroke(),t.strokeStyle="#ff7f50",t.beginPath(),t.moveTo(e[12].position.x,e[12].position.y),t.lineTo(e[14].position.x,e[14].position.y),t.lineTo(e[16].position.x,e[16].position.y),t.stroke(),t.strokeStyle="#f0e68c",t.beginPath(),t.moveTo(e[11].position.x,e[11].position.y),t.lineTo(e[13].position.x,e[13].position.y),t.lineTo(e[15].position.x,e[15].position.y),t.stroke()},q=function(){var t;M.FS("unlink",n),M.FS("unlink",C);for(var o=1;o<=e;o++)t="".concat("000000".concat(o).slice(-6)).concat(T),M.FS("unlink","".concat(R,"/").concat(t)),M.FS("unlink",t);var i=M.FS("readdir","/");console.dir(i)},A=function(t,n,o,i){var c=document.createElement("canvas"),r=c.getContext("2d");return function(t,e,n){var o=t.width,i=t.height;e.width=t.width,e.height=t.height,k(t.width),J(t.height),n.clearRect(0,0,n.canvas.width,n.canvas.height),o>i?n.drawImage(t,(o-i)/2,0,i,i,0,0,n.canvas.width,n.canvas.height):n.drawImage(t,0,(i-o)/2,o,o,0,0,n.canvas.width,n.canvas.height)}(t,c,r),m.estimateSinglePose(c).then(function(){var t=Object(l.a)(s.a.mark((function t(o){var u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return z(r,o.keypoints),u="".concat("000000".concat(i).slice(-6)).concat(T),t.t0=n,t.t1=u,t.next=6,N(c.toDataURL(U));case 6:t.t2=t.sent,t.t0.FS.call(t.t0,"writeFile",t.t1,t.t2),i===e&&function(){var t=Object(l.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.run("-r",P,"-pattern_type","glob","-i","*".concat(T),"-c:v","libx264","-pix_fmt","yuv420p","-r",P,C);case 2:return e=n.FS("readFile","out.mp4"),document.getElementById("movie").src=URL.createObjectURL(new Blob([e.buffer])),t.t0=j,t.next=8,N(URL.createObjectURL(new Blob([e.buffer])));case 8:t.t1=t.sent,(0,t.t0)(t.t1),q(),a(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),!0};return Object(o.useEffect)((function(){p.a().then((function(t){b(t)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F.a,{display:"flex",justifyContent:"center",m:1,p:1,children:Object(O.jsx)(S,{id:"movieInputFile",label:"Movie Select",accept:"video/*",buttonProps:{color:"primary"},onChange:_,loading:r})}),Object(O.jsx)(F.a,{display:null!==g?"flex":"none",m:1,p:1,children:Object(O.jsx)("video",{id:"movie",controls:!0})})]})}var J=function(){return Object(O.jsx)(D,{})},W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,578)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),o(t),i(t),c(t),r(t)}))};r.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root")),W()}},[[558,1,2]]]);
//# sourceMappingURL=main.bef248ea.chunk.js.map