(this.webpackJsonppose=this.webpackJsonppose||[]).push([[0],{394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},401:function(e,t){},402:function(e,t){},410:function(e,t){},413:function(e,t){},414:function(e,t){},563:function(e,t,n){"use strict";n.r(t);var o=n(17),i=n.n(o),c=n(155),r=n.n(c),a=(n(394),n(395),n(4)),s=n.n(a),l=n(11),p=n(6),u=(n(396),n(359)),d=(n(562),n(163)),j=n(379),b=n.n(j),f=n(380),h=n.n(f),m=n(582),x=n(595),g=n(593),O=n(583),v=n(238),y=n(37),w=Object(m.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1)},input:{display:"none"},buttonProgress:{color:v.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),S={word:".pdf,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",images:"image/*",excel:".xlsx,.xls,.csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},k=function(e){var t=e.accept,n=e.multiple,i=void 0!==n&&n,c=e.id,r=e.inputProps,a=e.labelProps,s=e.buttonProps,l=e.onChange,p=e.label,u=e.loading,j=w(),f=Object(o.useMemo)((function(){return function(e){if(!e||!e.length)return"";if(h()(e))return S[e]?S[e]:e;if(b()(e)){var t=e.length;return e.reduce((function(e,n,o){return S[n]?e+=S[n]:n&&n.length&&n.trim().length&&(e+=n.trim()),t>1&&o<t-1&&(e+=","),e}),"")}return""}(t)}),[t]);return Object(y.jsx)("div",{className:j.container,children:Object(y.jsxs)(x.a,{className:j.formControl,children:[Object(y.jsx)("input",Object(d.a)({id:c,accept:f,className:j.input,multiple:i,type:"file",onChange:l},r)),Object(y.jsxs)("label",Object(d.a)(Object(d.a)({htmlFor:c},a),{},{children:[Object(y.jsx)(g.a,Object(d.a)(Object(d.a)({variant:"contained",component:"span"},s),{},{disabled:u,children:p})),u&&Object(y.jsx)(O.a,{size:24,className:j.buttonProgress})]}))]})})},F=n(592),T=".jpg",P="30",C="out.mp4",L=/\.jpg/g,R="/inImage",B="%06d.jpg",I="image/jpeg",U=n(584),E=n(585),N=n(586),M=n(588),D=n(589),J=n(587),W=n(542),_=W.createFFmpeg,z=W.fetchFile,V=_({log:!0});function q(){var e=this,t=0,n="",i=Object(o.useState)(!1),c=Object(p.a)(i,2),r=c[0],a=c[1],d=Object(o.useState)(null),j=Object(p.a)(d,2),b=j[0],f=j[1],h=Object(o.useState)(null),m=Object(p.a)(h,2),x=m[0],g=m[1],O=Object(o.useState)(0),v=Object(p.a)(O,2),w=v[0],S=v[1],W=Object(o.useState)(0),_=Object(p.a)(W,2),q=_[0],A=_[1],G=Object(o.useState)("grey"),H=Object(p.a)(G,2),K=H[0],Q=H[1],X=Object(o.useState)("grey"),Y=Object(p.a)(X,2),Z=Y[0],$=Y[1],ee=Object(o.useState)("grey"),te=Object(p.a)(ee,2),ne=te[0],oe=te[1],ie=function(e,t){var n,o;return new Promise((function(i,c){n=V.FS("readFile",e),(o=document.createElement("img")).onload=function(){se(o,V,e,t),i(o)},o.src=URL.createObjectURL(new Blob([n.buffer]))}))},ce=function(){var o=Object(l.a)(s.a.mark((function o(i){var c,r,p,u,d,j;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=i.target.files,a(!0),Q("secondary"),r=c[0].name,n=r,console.log("load start"),o.next=8,V.load();case 8:return console.log("load end"),console.log("writeFile start"),o.t0=V,o.t1=r,o.next=14,z(c[0]);case 14:return o.t2=o.sent,o.t0.FS.call(o.t0,"writeFile",o.t1,o.t2),console.log("writeFile end"),console.log("mkdir start"),V.FS("mkdir",R),console.log("mkdir end"),console.log("encode start"),o.next=23,V.run("-i",r,"-r",P,"-f","image2","".concat(R,"/").concat(B));case 23:console.log("encode end"),p=V.FS("readdir",R),u=p.filter((function(e){return e.match(L)})),t=u.length,d=Promise.resolve(),j=function(){var n;return new Promise(function(){var o=Object(l.a)(s.a.mark((function o(i,c){var r;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(r=1;r<=t;r++)n="".concat(R,"/").concat("000000".concat(r).slice(-6)).concat(T),d=d.then(ie.bind(e,n,r));case 1:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())},Q("primary"),$("secondary"),Promise.resolve().then(j.bind(e));case 33:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),re=function(e,t){e.clearRect(0,0,w,q),e.lineWidth=3,e.strokeStyle="#191970",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[6].position.x,t[6].position.y),e.stroke(),e.strokeStyle="#ff8c00",e.beginPath(),e.moveTo(t[6].position.x,t[6].position.y),e.lineTo(t[8].position.x,t[8].position.y),e.lineTo(t[10].position.x,t[10].position.y),e.stroke(),e.strokeStyle="#00ffff",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[7].position.x,t[7].position.y),e.lineTo(t[9].position.x,t[9].position.y),e.stroke(),e.strokeStyle="#7cfc00",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[11].position.x,t[11].position.y),e.stroke(),e.strokeStyle="#7cfc00",e.beginPath(),e.moveTo(t[6].position.x,t[6].position.y),e.lineTo(t[12].position.x,t[12].position.y),e.stroke(),e.strokeStyle="#3cb371",e.beginPath(),e.moveTo(t[11].position.x,t[11].position.y),e.lineTo(t[12].position.x,t[12].position.y),e.stroke(),e.strokeStyle="#ff7f50",e.beginPath(),e.moveTo(t[12].position.x,t[12].position.y),e.lineTo(t[14].position.x,t[14].position.y),e.lineTo(t[16].position.x,t[16].position.y),e.stroke(),e.strokeStyle="#f0e68c",e.beginPath(),e.moveTo(t[11].position.x,t[11].position.y),e.lineTo(t[13].position.x,t[13].position.y),e.lineTo(t[15].position.x,t[15].position.y),e.stroke()},ae=function(){var e;V.FS("unlink",n),V.FS("unlink",C);for(var o=1;o<=t;o++)e="".concat("000000".concat(o).slice(-6)).concat(T),V.FS("unlink","".concat(R,"/").concat(e)),V.FS("unlink",e);var i=V.FS("readdir","/");console.dir(i)},se=function(e,n,o,i){var c=document.createElement("canvas"),r=c.getContext("2d");return function(e,t,n){var o=e.width,i=e.height;t.width=e.width,t.height=e.height,S(e.width),A(e.height),n.clearRect(0,0,n.canvas.width,n.canvas.height),o>i?n.drawImage(e,(o-i)/2,0,i,i,0,0,n.canvas.width,n.canvas.height):n.drawImage(e,0,(i-o)/2,o,o,0,0,n.canvas.width,n.canvas.height)}(e,c,r),b.estimateSinglePose(c).then(function(){var e=Object(l.a)(s.a.mark((function e(o){var p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(r,o.keypoints),p="".concat("000000".concat(i).slice(-6)).concat(T),e.t0=n,e.t1=p,e.next=6,z(c.toDataURL(I));case 6:e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),i===t&&function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("primary"),oe("secondary"),e.next=4,n.run("-r",P,"-pattern_type","glob","-i","*".concat(T),"-c:v","libx264","-pix_fmt","yuv420p","-r",P,C);case 4:return t=n.FS("readFile","out.mp4"),document.getElementById("movie").src=URL.createObjectURL(new Blob([t.buffer])),e.t0=g,e.next=10,z(URL.createObjectURL(new Blob([t.buffer])));case 10:e.t1=e.sent,(0,e.t0)(e.t1),ae(),oe("primary"),a(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!0};return Object(o.useEffect)((function(){u.a().then((function(e){f(e)}))}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(F.a,{display:"flex",justifyContent:"center",m:1,p:1,children:Object(y.jsx)("h1",{children:"\u30b4\u30eb\u30d5\u30b9\u30a4\u30f3\u30b0\u89e3\u6790\u30c4\u30fc\u30eb\uff08\u03b1\u7248\uff09"})}),Object(y.jsx)(F.a,{display:"flex",justifyContent:"center",m:1,p:1,children:Object(y.jsx)(k,{id:"movieInputFile",label:"Movie Select",accept:"video/*",buttonProps:{color:"primary"},onChange:ce,loading:r})}),Object(y.jsx)(F.a,{display:r?"flex":"none",m:1,p:1,children:Object(y.jsxs)(U.a,{align:"alternate",children:[Object(y.jsxs)(E.a,{children:[Object(y.jsxs)(N.a,{children:[Object(y.jsx)(J.a,{color:K}),Object(y.jsx)(M.a,{})]}),Object(y.jsx)(D.a,{children:"\u52d5\u753b\u89e3\u6790\u4e2d"})]}),Object(y.jsxs)(E.a,{children:[Object(y.jsxs)(N.a,{children:[Object(y.jsx)(J.a,{color:Z}),Object(y.jsx)(M.a,{})]}),Object(y.jsx)(D.a,{children:"\u30dd\u30fc\u30ba\u89e3\u6790\u4e2d"})]}),Object(y.jsxs)(E.a,{children:[Object(y.jsx)(N.a,{children:Object(y.jsx)(J.a,{color:ne})}),Object(y.jsx)(D.a,{children:"\u52d5\u753b\u518d\u30a8\u30f3\u30b3\u30fc\u30c9\u4e2d"})]})]})}),Object(y.jsx)(F.a,{display:null!==x?"flex":"none",m:1,p:1,children:Object(y.jsx)("video",{id:"movie",controls:!0})})]})}var A=n(596),G=n(590),H=n(591),K=Object(m.a)((function(e){return{appBar:{top:"auto",bottom:0}}}));var Q=function(){var e=K();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(q,{}),Object(y.jsx)(A.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(y.jsx)(G.a,{children:Object(y.jsx)(H.a,{variant:"body2",color:"initial",align:"center",width:1,children:"Ver 0.1.2 Since 2021"})})})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,598)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),c(e),r(e)}))};r.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(Q,{})}),document.getElementById("root")),X()}},[[563,1,2]]]);
//# sourceMappingURL=main.18e17291.chunk.js.map