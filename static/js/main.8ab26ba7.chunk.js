(this.webpackJsonppose=this.webpackJsonppose||[]).push([[0],{394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},401:function(e,t){},402:function(e,t){},410:function(e,t){},413:function(e,t){},414:function(e,t){},563:function(e,t,n){"use strict";n.r(t);var o=n(17),i=n.n(o),c=n(155),r=n.n(c),a=(n(394),n(395),n(4)),s=n.n(a),l=n(11),u=n(6),p=(n(396),n(358)),f=(n(562),n(163)),j=n(378),b=n.n(j),d=n(379),h=n.n(d),m=n(581),x=n(592),g=n(590),O=n(582),v=n(238),y=n(40),S=Object(m.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1)},input:{display:"none"},buttonProgress:{color:v.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),w={word:".pdf,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",images:"image/*",excel:".xlsx,.xls,.csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},k=function(e){var t=e.accept,n=e.multiple,i=void 0!==n&&n,c=e.id,r=e.inputProps,a=e.labelProps,s=e.buttonProps,l=e.onChange,u=e.label,p=e.loading,j=S(),d=Object(o.useMemo)((function(){return function(e){if(!e||!e.length)return"";if(h()(e))return w[e]?w[e]:e;if(b()(e)){var t=e.length;return e.reduce((function(e,n,o){return w[n]?e+=w[n]:n&&n.length&&n.trim().length&&(e+=n.trim()),t>1&&o<t-1&&(e+=","),e}),"")}return""}(t)}),[t]);return Object(y.jsx)("div",{className:j.container,children:Object(y.jsxs)(x.a,{className:j.formControl,children:[Object(y.jsx)("input",Object(f.a)({id:c,accept:d,className:j.input,multiple:i,type:"file",onChange:l},r)),Object(y.jsxs)("label",Object(f.a)(Object(f.a)({htmlFor:c},a),{},{children:[Object(y.jsx)(g.a,Object(f.a)(Object(f.a)({variant:"contained",component:"span"},s),{},{disabled:p,children:u})),p&&Object(y.jsx)(O.a,{size:24,className:j.buttonProgress})]}))]})})},F=n(589),T=".jpg",P="30",C="out.mp4",L=/\.jpg/g,R="/inImage",I="%06d.jpg",U="image/jpeg",B=n(583),E=n(584),N=n(585),M=n(587),D=n(588),J=n(586),W=n(542),_=W.createFFmpeg,z=W.fetchFile,q=_({log:!1});function A(){var e=this,t=0,n="",i=Object(o.useState)(!1),c=Object(u.a)(i,2),r=c[0],a=c[1],f=Object(o.useState)(null),j=Object(u.a)(f,2),b=j[0],d=j[1],h=Object(o.useState)(null),m=Object(u.a)(h,2),x=m[0],g=m[1],O=Object(o.useState)(0),v=Object(u.a)(O,2),S=v[0],w=v[1],W=Object(o.useState)(0),_=Object(u.a)(W,2),A=_[0],G=_[1],H=Object(o.useState)("grey"),K=Object(u.a)(H,2),Q=K[0],V=K[1],X=Object(o.useState)("grey"),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],ee=Object(o.useState)("grey"),te=Object(u.a)(ee,2),ne=te[0],oe=te[1],ie=function(e,t){var n,o;return new Promise((function(i,c){n=q.FS("readFile",e),(o=document.createElement("img")).onload=function(){se(o,q,e,t),i(o)},o.src=URL.createObjectURL(new Blob([n.buffer]))}))},ce=function(){var o=Object(l.a)(s.a.mark((function o(i){var c,r,u,p,f,j;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=i.target.files,a(!0),V("secondary"),r=c[0].name,n=r,o.next=7,q.load();case 7:return o.t0=q,o.t1=r,o.next=11,z(c[0]);case 11:return o.t2=o.sent,o.t0.FS.call(o.t0,"writeFile",o.t1,o.t2),q.FS("mkdir",R),o.next=16,q.run("-i",r,"-r",P,"-f","image2","".concat(R,"/").concat(I));case 16:u=q.FS("readdir",R),p=u.filter((function(e){return e.match(L)})),t=p.length,f=Promise.resolve(),j=function(){var n;return new Promise(function(){var o=Object(l.a)(s.a.mark((function o(i,c){var r;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(r=1;r<=t;r++)n="".concat(R,"/").concat("000000".concat(r).slice(-6)).concat(T),f=f.then(ie.bind(e,n,r));case 1:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())},V("primary"),$("secondary"),Promise.resolve().then(j.bind(e));case 25:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),re=function(e,t){e.clearRect(0,0,S,A),e.lineWidth=3,e.strokeStyle="#191970",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[6].position.x,t[6].position.y),e.stroke(),e.strokeStyle="#ff8c00",e.beginPath(),e.moveTo(t[6].position.x,t[6].position.y),e.lineTo(t[8].position.x,t[8].position.y),e.lineTo(t[10].position.x,t[10].position.y),e.stroke(),e.strokeStyle="#00ffff",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[7].position.x,t[7].position.y),e.lineTo(t[9].position.x,t[9].position.y),e.stroke(),e.strokeStyle="#7cfc00",e.beginPath(),e.moveTo(t[5].position.x,t[5].position.y),e.lineTo(t[11].position.x,t[11].position.y),e.stroke(),e.strokeStyle="#7cfc00",e.beginPath(),e.moveTo(t[6].position.x,t[6].position.y),e.lineTo(t[12].position.x,t[12].position.y),e.stroke(),e.strokeStyle="#3cb371",e.beginPath(),e.moveTo(t[11].position.x,t[11].position.y),e.lineTo(t[12].position.x,t[12].position.y),e.stroke(),e.strokeStyle="#ff7f50",e.beginPath(),e.moveTo(t[12].position.x,t[12].position.y),e.lineTo(t[14].position.x,t[14].position.y),e.lineTo(t[16].position.x,t[16].position.y),e.stroke(),e.strokeStyle="#f0e68c",e.beginPath(),e.moveTo(t[11].position.x,t[11].position.y),e.lineTo(t[13].position.x,t[13].position.y),e.lineTo(t[15].position.x,t[15].position.y),e.stroke()},ae=function(){var e;q.FS("unlink",n),q.FS("unlink",C);for(var o=1;o<=t;o++)e="".concat("000000".concat(o).slice(-6)).concat(T),q.FS("unlink","".concat(R,"/").concat(e)),q.FS("unlink",e);var i=q.FS("readdir","/");console.dir(i)},se=function(e,n,o,i){var c=document.createElement("canvas"),r=c.getContext("2d");return function(e,t,n){var o=e.width,i=e.height;t.width=e.width,t.height=e.height,w(e.width),G(e.height),n.clearRect(0,0,n.canvas.width,n.canvas.height),o>i?n.drawImage(e,(o-i)/2,0,i,i,0,0,n.canvas.width,n.canvas.height):n.drawImage(e,0,(i-o)/2,o,o,0,0,n.canvas.width,n.canvas.height)}(e,c,r),b.estimateSinglePose(c).then(function(){var e=Object(l.a)(s.a.mark((function e(o){var u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(r,o.keypoints),u="".concat("000000".concat(i).slice(-6)).concat(T),e.t0=n,e.t1=u,e.next=6,z(c.toDataURL(U));case 6:e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),i===t&&function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("primary"),oe("secondary"),e.next=4,n.run("-r",P,"-pattern_type","glob","-i","*".concat(T),"-c:v","libx264","-pix_fmt","yuv420p","-r",P,C);case 4:return t=n.FS("readFile","out.mp4"),document.getElementById("movie").src=URL.createObjectURL(new Blob([t.buffer])),e.t0=g,e.next=10,z(URL.createObjectURL(new Blob([t.buffer])));case 10:e.t1=e.sent,(0,e.t0)(e.t1),ae(),oe("primary"),a(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!0};return Object(o.useEffect)((function(){p.a().then((function(e){d(e)}))}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(F.a,{display:"flex",justifyContent:"center",m:1,p:1,children:Object(y.jsx)(k,{id:"movieInputFile",label:"Movie Select",accept:"video/*",buttonProps:{color:"primary"},onChange:ce,loading:r})}),Object(y.jsx)(F.a,{display:r?"flex":"none",m:1,p:1,children:Object(y.jsxs)(B.a,{align:"alternate",children:[Object(y.jsxs)(E.a,{children:[Object(y.jsxs)(N.a,{children:[Object(y.jsx)(J.a,{color:Q}),Object(y.jsx)(M.a,{})]}),Object(y.jsx)(D.a,{children:"\u52d5\u753b\u89e3\u6790\u4e2d"})]}),Object(y.jsxs)(E.a,{children:[Object(y.jsxs)(N.a,{children:[Object(y.jsx)(J.a,{color:Z}),Object(y.jsx)(M.a,{})]}),Object(y.jsx)(D.a,{children:"\u30dd\u30fc\u30ba\u89e3\u6790\u4e2d"})]}),Object(y.jsxs)(E.a,{children:[Object(y.jsx)(N.a,{children:Object(y.jsx)(J.a,{color:ne})}),Object(y.jsx)(D.a,{children:"\u52d5\u753b\u518d\u30a8\u30f3\u30b3\u30fc\u30c9\u4e2d"})]})]})}),Object(y.jsx)(F.a,{display:null!==x?"flex":"none",m:1,p:1,children:Object(y.jsx)("video",{id:"movie",controls:!0})})]})}var G=function(){return Object(y.jsx)(A,{})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,594)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),c(e),r(e)}))};r.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(G,{})}),document.getElementById("root")),H()}},[[563,1,2]]]);
//# sourceMappingURL=main.8ab26ba7.chunk.js.map